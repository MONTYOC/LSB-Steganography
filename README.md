# 🖼️ LSB Steganography Tool (GUI + CLI)

This Python script allows embedding and extraction of secret messages in images using **Least Significant Bit (LSB) steganography**. It supports both **graphical user interface (GUI)** and **command-line interface (CLI)** modes.

---

## 📦 Requirements

- Python 3.x
- `tkinter` (usually included with Python)
- `Pillow` library (`pip install pillow`)

---

## 🛠️ Features

- **Embed messages** in image files using LSB encoding.
- **Extract messages** hidden within images.
- **User-friendly GUI** for both embedding and extraction.
- **CLI mode** for automation and scripting.
- **Calculate PSNR and bit changes** between original and stego images.

---

## 🧪 Functions Overview

### 🔣 `text_to_bits(text)`
Converts a text string into its binary representation.

### 🧾 `bits_to_text(bits)`
Reconstructs the original text from a binary string.

---

### 🖊️ `embed_text_on_image(image_path, message)`
Embeds a message into an image using the least significant bits of each color channel.
- Adds a special delimiter (`#####END#####`) to signify the message's end.
- Creates a new image file prefixed with `Embedded-`.
- Returns the new image's filename.

**Raises**:
- `ValueError`: If the message is too large for the image.
- `FileNotFoundError`: If the specified image is missing.

---

### 🕵️ `extract_text_from_image(image_path)`
Reads the LSBs of the image and reconstructs the embedded message until it finds the `#####END#####` delimiter.

Returns the decoded message string.

---

### 🖼️ `run_embedding_gui()`
Opens a GUI that allows:
- Selecting an image
- Typing a message
- Embedding the message into the image

---

### 🔍 `run_extraction_gui()`
GUI interface to:
- Load an image with an embedded message
- Extract and display the hidden message

---

### 📊 `calculate_psnr(original_image_path, stego_image_path)`
Calculates the **Peak Signal-to-Noise Ratio (PSNR)** and the **number of bits changed** between the original image and the stego image.

**Parameters**:
- `original_image_path`: Path to the original image.
- `stego_image_path`: Path to the stego image.

**Returns**:
- The PSNR value in decibels (dB). Higher values indicate better quality.
- The number of bits changed between the two images.
- Returns `None` if an error occurs.

**Usage**:
```bash
python analysis.py <path_to_original_image> <path_to_stego_image>
```

---

## 💻 Command-Line Usage

### Embed Message
```bash
python lsb.py -e -i <image.png> -m "your secret message"
```

Displays the number of bits changed after embedding.

### Extract Message
```bash
python lsb.py -x -i <Embedded-image.png>
```

### Run Embedding GUI
```bash
python lsb.py -gui_e
```

### Run Extraction GUI
```bash
python lsb.py -gui_x
```

---

## 📁 Output

When embedding, the tool generates a new PNG file in the same directory:
```
Embedded-<original_filename>.png
```

Additionally, it displays the number of bits changed during the embedding process.

---

## ⚠️ Notes

- The message capacity is limited by the image size: each pixel can store up to 3 bits (1 bit per RGB channel).
- **Avoid using lossy image formats (e.g., JPEG)** as they may corrupt the embedded message during compression.

---

## 🛠️ Troubleshooting

### 🖼️ Issue: Embedded message not found during extraction
- Ensure the image used for extraction is the correct stego image generated by the tool.
- Verify that the image format is PNG or another lossless format.

### 🖥️ Issue: GUI not launching
- Confirm that `tkinter` is installed and supported by your Python environment.
- Run the script with Python 3.x.

### 📉 Issue: Low PSNR value
- Use high-resolution images to minimize distortion.
- Avoid embedding excessively large messages.

---

## 📌 Example

```bash
python lsb.py -e -i image.png -m "The treasure is buried under the oak tree."
```

Result: An image named `Embedded-image.png` containing the hidden message.
